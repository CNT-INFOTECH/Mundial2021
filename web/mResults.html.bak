<!DOCTYPE html>
<html>
	<head>
		<title>PasoTracker | Results</title>
		<meta charset="ISO-8859-1" />
		<link rel="shortcut icon" href="Images/favicon.ico" type="image/x-icon">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="dist/jquery.mobile.theme.css" />
		<link rel="stylesheet" href="dist/css/style1.css" />
		<link rel="stylesheet" href="dist/css/jquery.mobile.structure-1.3.2.min.css" />
		<script src="js/jquery-1.9.1.min.js"></script>
		<script src="js/jquery.mobile-1.3.2.min.js"></script>
		<style>
			div[data-role="page"] {
				background: #fff;
			}
			img {
 height: auto;
 max-width: 100%;
}

.image-table {
 border: 0px solid rgba(0, 0, 0, 0);
 border-collapse: separate;
 border-spacing: 6px;
 table-layout: fixed;
 text-align: center;
 width: 100%;
}
		</style>
        <script src="kendo/js/jquery.min.js"></script>
        <script src="kendo/js/kendo.all.min.js"></script>
        
	</head>
	<body>
		<div data-role="page">
					 <div class="ui-header">
					<input type="hidden" id="showSeq" name="showSeq" value="" />
					<input type="hidden" id="eventSeq" name="eventSeq" value="" />
						 <table class="image-table">
						<tbody>
						<tr>
						<td align="left">
						
						<table>
						<td>
							<a onclick='fnOpenPg("mClasses.html?sSq="+showSeq.value)'  data-iconpos="notext" data-theme="b" data-role="button" data-icon="arrow-l" title=" Back "> 
                            <span class="ui-btn-inner ui-btn-corner-all"> 
                                <span class="ui-btn-text"> Back </span> 
                                <span data-form="ui-icon" class="ui-icon ui-icon-arrow-l ui-icon-shadow"></span> 
                            </span> 
                        </a>
						</td>
						<td>
							<img src="Images/fccpr.png" onclick='fnOpenPg("mShows.html")' style="width:80px"/>
						</td>
						</table>	
							
							
						</td>
						<td align="center">
						<img src="Images/paso-logo.png" />
						</td>
						<td align="right">
						
						<table>
						<td>
							<img src="Images/confepaso1.png"  style="width:80px" onclick='fnOpenPg("mShows.html")'/>
						</td>
						<td>
							
							
							<a onclick='fnOpenPg("mShows.html")' data-iconpos="notext" data-theme="b" data-role="button" data-icon="home" title=" Back "> 
                            <span class="ui-btn-inner ui-btn-corner-all"> 
                                <span class="ui-btn-text"> Back </span> 
                                <span data-form="ui-icon" class="ui-icon ui-icon-arrow-l ui-icon-shadow"></span> 
                            </span> 
                        </a>
						</td>
						</table>
						
							
						</td>
						</tr>
						</tbody>
						</table>
					</div>
					
					<div class="ui-content ui-body-b" data-theme="b" data-form="ui-body-b" data-role="content" role="main">

					<ul data-role="listview" data-inset="true" id="showNameview" ><li></li></ul>
					<script type="text/x-kendo-template" id="showTemplate">                                                                                           
						<li data-role="list-divider" class="fccpr-divider ui-li ui-li-divider ui-bar-b ui-bar-inherit ui-first-child ui-last-child" role="heading">
						<p class="ui-li-aside ui-li-desc" id="paso-views">
								<a onclick="fnChangeView(resultListView,TableView,resultFormat)" ><label id="resultFormat">Grid View</label></a>
								</p>
									#:showName#
															<p><strong>#:name#</strong>&nbsp;<strong>#:Event_Date#</strong></p>
						</li>                          
					</script>
					
					<div id="TableView">
					<table  data-role="table" data-mode="reflow" class="ui-responsive" >
						<thead>
						<th data-name="Pos" >Position</th>
						<th data-name="HorseName" >Ejemplar/Entry</th>
						<th data-name="Sire" >Padre/Sire</th>
						<th data-name="Dam" >Madre/Dam</th>
						<th data-name="GrandSire" >Abuelo Materno/Grand Sire</th>
						<th data-name="Owner" >Due&ntilde;o/Owner</th>
						<th data-name="Breeder" >Criador/Breeder</th>
						<th data-name="Rider" >Montador/Rider</th>
						<th data-name="Country" >Pa&iacute;s/Country</th>
						</thead>
						<tbody id="tBodyView" class="ui-responsive" ></tbody>
						<script type="text/x-kendo-template" id="template1"> 
						<tr role="row" class="odd" >
						
							<td data-title="&nbsp;" style="text-align:center;" >
							
							
							<img src="Images/#:Placement#.png" class="ui-li-icon"></img>
						
							#if(EventType=='GROUP'){#GROUP#:BackNum# /#:Group_Relation#   #}# </td>

							<td data-title="Ejemplar/Entry" ><b>#:HorseName#</b></td>
							<td data-title="Padre/Sire" >#:Sire#</td>
							<td data-title="Madre/Dam" >#:Dam#</td>
							<td data-title="Abuelo Materno/Grand Sire" >#:GrandSire#</td>
							<td data-title="Due&ntilde;o/Owner" >#:Owner#</td>
							<td data-title="Criador/Breeder" >#:Breeder#</td>
							<td data-title="Montador/Rider" >#:Rider#</td>
							<td data-title="Pa&iacute;s/Country" >#:RepresentingCountry#</td>
						</tr>
						</script>
					</table>
					</div>
					
					<div id="GridView"  style="display:none">
					<ul data-role="listview" data-inset="true" class="result-list ui-listview ui-listview-inset ui-corner-all ui-shadow" id="resultListView" ></ul>                                          
					
					<script type="text/x-kendo-template" id="template"> 
						<li class="ui-li ui-li-static ui-btn-up-b ui-li-has-thumb">
						
						    <img src="Images/#:Placement#.png" class="ui-li-thumb">	
							#if(EventType=='GROUP'){#<p class="ui-li-desc"><strong>Relacion Ejemplar : </strong> GROUP#:BackNum# - #:Group_Relation#</p>#}#	
							<p class="ui-li-heading"><strong>Ejemplar/Entry : </strong> <b>#:HorseName#</b></p>							
							<p class="ui-li-desc"><strong>Padre/Sire : </strong> #:Sire#</p>
							<p class="ui-li-desc"><strong>Madre/Dam : </strong> #:Dam#</p>
							<p class="ui-li-desc"><strong>Abuelo Materno/Grand Sire : </strong> #:GrandSire#</p>
							<p class="ui-li-desc"><strong>Dueño/Owner : </strong> #:Owner#</p>
							<p class="ui-li-desc"><strong>Criador/Breeder : </strong> #:Breeder#</p>
							<p class="ui-li-desc"><strong>Montador/Rider : </strong> #:Rider#</p>    
							<p class="ui-li-desc"><strong>País/Country : </strong> #:RepresentingCountry#</p>   							
						</li>
					</script>
					</div>
					
					<br><br><br>
					  <table class="tPaso" >
					  <tr>
					  <td colspan=8>EX - Excusado / Excused</td>
					  </tr>
					  <tr>
					  <td colspan=8>NP - Fuera del Marcador / No Placement</td>
					  </tr>
					  <tr>
					  <td colspan=8>CF1 - No entro al F1 / Cut at F1</td>
					  </tr>
					  <tr>
					  <td colspan=8>DQ - Descalificado / Disqualified</td>
					  </tr>
					  </table>
					<table>
					<tr>
					  <td><a href="#" onclick="fnOpenJudgeCard('mJudgesCard.html')">Click here to view Judges Card</a></td>
					  </tr>
					  </table>
					</div>
					<div class="ui-bar-b fccpr-footer" data-swatch="b" data-theme="b" data-form="ui-bar-b" data-role="footer" role="footer" data-position="fixed">
						<div class="foot-left"><p>&#9400; Copyright 2011 All Rights Reserved</p></div>
						<div class="foot-right"><a href="http://www.cntinfotech.com/" target="_blank"><img src="Images/cntit_smallest.png" height="30px"/></a> </div>
					</div>
		</div>
		<script>
        $(function() {
            
            var get_params = function(search_string) {

            var parse = function(params, pairs) {
            var pair = pairs[0];
            var parts = pair.split('=');
            var key = decodeURIComponent(parts[0]);
            var value = decodeURIComponent(parts.slice(1).join('='));

            // Handle multiple parameters of the same name
            if (typeof params[key] === "undefined") {
            params[key] = value;
            } else {
            params[key] = [].concat(params[key], value);
            }

            return pairs.length == 1 ? params : parse(params, pairs.slice(1))
            }

            // Get rid of leading ?
            return search_string.length == 0 ? {} : parse({}, search_string.substr(1).split('&'));
            }
            var params = get_params(location.search);

            // Finally, to get the param you want
            var ShowSq=params['sSq'];
            var evntSq=params['sEq'];
           $("#showSeq").val(ShowSq);
		   $("#eventSeq").val(evntSq);
            
            var webPort=location.port
            var webprotocol=location.protocol
            var webHost=location.host
            var webHostName=location.hostname
            //alert(window.location.pathname+"--------tttt-----"+location)
            var loc=location;            
            //var pathArray = loc.split( '/?' );
//            alert(pathArray.length)
            /*
            var newPathname = "";
            for (i = 0; i <=pathArray.length; i++) {
              //newPathname += "/";
              newPathname += pathArray[i];
              alert(pathArray[i])
            }*/
//            var webUrl=webprotocol+"//"+webHost+"/PasoBet_Kendo/pbClasses.jsp?act=get&pShowSeq="+ShowSq;
            var webUrl="http://www.pasotracker.com/Mundial2017/mResults/pbResult.jsp?act=get&pClassSeq="+evntSq;
            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: webUrl,//"http://localhost:8080/PasoBet_Kendo/pbShows.jsp?act=get",
                        dataType: "json"
                    }
                }//,pageSize: 21
            });

            $("#pager").kendoPager({
                dataSource: dataSource
            });

            $("#resultListView").kendoListView({
                dataSource: dataSource,
                template: kendo.template($("#template").html())
            });
			
			$("#tBodyView").kendoListView({
                dataSource: dataSource,
                template: kendo.template($("#template1").html())
            });
            
            var showNameWebUrl="http://www.pasotracker.com/Mundial2017/mResults/pbClasses.jsp?pShowSeq="+ShowSq+"&pClassSeq="+evntSq;
            var sdataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: showNameWebUrl,//"http://localhost:8080/PasoBet_Kendo/pbShows.jsp?act=get",
                        dataType: "json"
                    }
                }//,pageSize: 21
            });

            $("#showNameview").kendoListView({
                dataSource: sdataSource,
                template: kendo.template($("#showTemplate").html())
            });
//            alert(dataSource)
//            window.location.reload();
        });
		</script>
			

            
            <!--<script src="js/jquery.min.js"></script>-->
            <script src="js/jquery.mobile-1.4.5.min.js"></script>
            <script src="js/jquery.validate.min.js" type="text/javascript"></script>
            <script type="text/javascript" src="js/email.js"></script>
            <script type="text/javascript" src="js/jquery.swipebox.js"></script>
            <script src="js/jquery.mobile-custom.js"></script>
<script type="text/javascript">
$.fn.invisible = function() {
        return this.each(function() {
            $(this).css("visibility", "hidden");			
			$(this).css("width", "0px");			
        });
    };
    $.fn.visible = function() {
        return this.each(function() {
            $(this).css("visibility", "visible");
			$(this).css("width", "auto");			
        });
    };
function fnOpenPg(pg) {
//    alert("pageUrl12")
    window.open(pg,'_self');
//    app.navigate("#betByEvent");
}
function fnChangeView(view,view1){
	if(resultFormat.innerHTML=="Table View"){
		/*$("#TableView").visible();
		$("#resultListView").invisible();*/
		$("#TableView").show();
		$("#GridView").hide();
		resultFormat.innerHTML="Grid View";		
	}
	else if(resultFormat.innerHTML=="Grid View"){
		/*$("#TableView").invisible();
		$("#resultListView").visible();*/
		$("#TableView").hide();
		$("#GridView").show();
		resultFormat.innerHTML="Table View"
	}
}

function fnOpenJudgeCard(pg) {
var ShowSq=$("#showSeq").val();
            var evntSq=$("#eventSeq").val();
var url=pg+"?sSq="+ShowSq+"&sEq="+evntSq;
    window.open(url,'_self');
//    app.navigate("#betByEvent");
}

</script>
	</body>
</html>
